---
driver:
  name: vagrant

provisioner:
  name: chef_zero

platforms:
  - name: ubuntu-14.04

suites:
  - name: storm
    run_list:
      - recipe[dice_common::host]
      - recipe[apt::default]
      - recipe[dmon_agent::mock_dmon]
      - recipe[dmon_agent::default]
      - recipe[dmon_agent::collectd]
      - recipe[dmon_agent::storm]
    attributes:
      cloudify: &cfy_config
        properties:
          monitoring: &monitoring_config
            enabled: true
            dmon_address: 127.0.0.1:5001
            logstash_lumberjack_address: 10.211.55.100:5000
            logstash_lumberjack_crt: crt
            logstash_graphite_address: 10.211.55.100:5002
            logstash_udp_address: 10.211.55.100:25826

  - name: spark
    run_list:
      - recipe[dice_common::host]
      - recipe[apt::default]
      - recipe[dmon_agent::mock_dmon]
      - recipe[dmon_agent::default]
      - recipe[dmon_agent::collectd]
      - recipe[dmon_agent::spark]
    attributes:
      cloudify: *cfy_config
      spark:
        spark-env:
          SPARK_CONF_DIR: /tmp

  # This one is named hadoop because logstash forwarder is used when
  # monitoring hadoop cluster. When we have actual recipe for hadoop, this can
  # be simply updated a bit.
  - name: hadoop
    run_list:
      - recipe[dice_common::host]
      - recipe[apt::default]
      - recipe[dmon_agent::mock_dmon]
      - recipe[dmon_agent::default]
      - recipe[dmon_agent::lsf]
    attributes:
      cloudify: *cfy_config
